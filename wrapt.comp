#!/bin/bash
# wrapt - a simple wrapper for apt that brings all useful apt commands into one easy to use script
# Created by simonizor
# License: GPLv2 Only

_wrapt () {
    local curcontext="$curcontext" state line
    typeset -A opt_args
 
    _arguments \
        '1: :->args'\
        '2: :->input'
 
    case $state in
    args)
        _arguments '1:arguments:(-h -l -li -S -L -sd -srd -se -sh -m -i -deb -r -ra -ud -ug -uu -fu -ar -es)'
        ;;
    *)
        case $words[2] in
        -l)
            compadd "$@" $(echo "$(apt-cache pkgnames) -a" | grep "\${words[3]}\|${words[4]}")
            ;;
        -m)
            compadd "$@" $(echo "$(dpkg --get-selections | grep -v deinstall) -sa -sd -sm -su -a -h -m -sh -u" | grep "\${words[3]}\|${words[4]}\|${words[5]}\|${words[6]}\|${words[7]}\|${words[8]}\|${words[9]}\|${words[10]}")
            ;;
        -r)
            compadd "$@" $(echo "$(dpkg --get-selections | grep -v deinstall) -ra -rap -p" | grep "\${words[3]}\|${words[4]}\|${words[5]}\|${words[6]}\|${words[7]}\|${words[8]}\|${words[9]}\|${words[10]}")
            ;;
        -L|-ra|-ud|-ug|-uu|-fu)
            compadd "$@" $(echo "$(dpkg --get-selections | grep -v deinstall)" | grep "\${words[3]}\|${words[4]}\|${words[5]}\|${words[6]}\|${words[7]}\|${words[8]}\|${words[9]}\|${words[10]}")
            ;;
        -i|-sd|-srd|-se|-sh)
            compadd "$@" $(echo "$(apt-cache pkgnames)" | grep "\${words[3]}\|${words[4]}\|${words[5]}\|${words[6]}\|${words[7]}\|${words[8]}\|${words[9]}\|${words[10]}")
            ;;
        *)
            _files
            ;;
        esac
    esac
}
